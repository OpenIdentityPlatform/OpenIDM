
<style>
#targetLinking fieldset {
       margin-top: 0;
}
#targetLinking .group-field {
       float: left !important;
       width: 100%;
}
#targetLinking .field label {
       text-align: left;
}
#targetLinking .field input,#targetLinking .field select {
       clear: both;
}
#targetLinking .field .validation-message {
       clear: none !important;
       margin-left: 20px !important;
       float: left !important;
}

input.readonlyTextbox {
        border: 0px;
        width: 10px;
}
</style>

<h2 class="header">Role Status Check</h2>
<fieldset>
    <div class="fields">
        <div class="field">
            <label>Role Name</label> 
            <input type="text" value="{{variables.uidata.rolename}}" readonly/> 
        </div>
        <div class="field">
            <label>Role ID</label> 
            <input type="text" value="{{variables.uidata.roleid}}" readonly/> 
        </div>
        <div class="field">
            <label>Role description</label> 
            <input type="text" value="{{variables.uidata.roledescription}}" readonly/> 
        </div>
        <table>
        <tbody>
        
        {{#each variables.uidata.assignments}}
        <tr>
            <td><label>Assignment Name</label></td>
            <td><label>{{assignmentname}}</label></td>
        </tr>
            {{#each attributes}}
                <tr>
                    <td>Name</td>
                    <td>{{name}}</td>
                </tr>
                <tr>
                    <td>Assignment Operation</td>
                    <td>{{assignmentOperation}}</td>
                </tr>
                <tr>
                    <td>Unassignment Operation</td>
                    <td>{{unassignmentOperation}}</td>
                </tr>
                <tr>
                    <td>Value</td>
                    <td>
                        <ul class="attributeValues" id="{{../assignmentname}}{{name}}List" name="{{../assignmentname}}{{name}}List" contenteditable="true">
                            {{#each value}}
                            <li>{{.}}</li>
                            {{/each}}
                        </ul>
                        <input type="text" class="attributeValues" name="{{../assignmentname}}{{name}}Assignments" hidden/>
                    </td>
                </tr>
            {{/each}}
        {{/each}}
        
        </tbody>
    </table>
        
    <div class="field">  
        <label class="light">Certification result:</label> 
        <select name="decision">
            <option value="certify">Certify</option>
            <option value="update">Update</option>
        </select>
    </div>
        
    </div>
</fieldset>

<script type="text/javascript">
$(document).ready(function() {

    $("#taskDetails #actions input[name=saveButton]").click(function(e) {
        e.preventDefault();

        $("#taskDetails ul.attributeValues").each(function () {
            var input = $(this).parent().find("input.attributeValues"),
                list = _.map($("li", this), function (v) { return $(v).text(); });

            input.val(JSON.stringify(list));
        });

    });
});
</script>
