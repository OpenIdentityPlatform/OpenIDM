{
    "objects" : [
        {
            "name" : "user",
            "onCreate" : {
                "type" : "text/javascript",
                "file" : "ui/onCreate-user-set-default-fields.js"
            },
            "onDelete" : {
                "type" : "text/javascript",
                "file" : "ui/onDelete-user-cleanup.js"
            },
            "properties" : [
                {
                    "name" : "securityAnswer",
                    "encryption" : {
                        "key" : "openidm-sym-default"
                    },
                    "scope" : "private"
                },
                {
                    "name" : "password",
                    "encryption" : {
                        "key" : "openidm-sym-default"
                    },
                    "scope" : "private"
                },
                {
                    "name" : "effectiveRoles",
                    "type" : "virtual",
                    "onRetrieve" : {
                        "type" : "text/javascript",
                        "file" : "roles/effectiveRoles.js",
                        "rolesPropName" : "roles"
                    }
                },
                {
                    "name" : "effectiveAssignments",
                    "type" : "virtual",
                    "onRetrieve" : {
                        "type" : "text/javascript",
                        "file" : "roles/effectiveAssignments.js",
                        "effectiveRolesPropName" : "effectiveRoles"
                    }
                }
            ],
            "schema" : {
                "$schema" : "http://forgerock.org/json-schema#",
                "type" : "object",
                "title" : "Users",
                "description" : "User Data",
                "properties" : {
                    "userName" : {
                        "description" : "",
                        "title" : "User Name",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "password" : {
                        "description" : "",
                        "title" : "Password",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "mail" : {
                        "description" : "",
                        "title" : "Email Address",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "givenName" : {
                        "description" : "",
                        "title" : "First Name",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "sn" : {
                        "description" : "",
                        "title" : "Last Name",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "telephoneNumber" : {
                        "description" : "",
                        "title" : "Telephone Number",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "accountStatus" : {
                        "description" : "",
                        "title" : "Account Status",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "roles" : {
                        "description" : "",
                        "title" : "Roles",
                        "viewable" : true,
                        "searchable" : true,
                        "resourceCollection" : {
                            "path" : "managed/roles",
                            "query" : {
                                "queryFilter" : "",
                                "fields" : [ ],
                                "sortKeys" : [ ]
                            }
                        },
                        "type" : "string"
                    },
                    "postalCode" : {
                        "description" : "",
                        "title" : "Postal Code",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "stateProvince" : {
                        "description" : "",
                        "title" : "State or Province",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "postalAddress" : {
                        "description" : "",
                        "title" : "Postal Address",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "address2" : {
                        "description" : "",
                        "title" : "Postal Address (cont)",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "country" : {
                        "description" : "",
                        "title" : "Country",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    },
                    "city" : {
                        "description" : "",
                        "title" : "City",
                        "viewable" : true,
                        "searchable" : true,
                        "type" : "string"
                    }
                },
                "required" : [
                    "userName",
                    "password",
                    "mail",
                    "givenName",
                    "sn",
                    "accountStatus",
                    "roles",
                    "postalCode",
                    "stateProvince",
                    "postalAddress",
                    "address2",
                    "country",
                    "city"
                ],
                "order" : [
                    "userName",
                    "password",
                    "mail",
                    "givenName",
                    "sn",
                    "telephoneNumber",
                    "accountStatus",
                    "roles",
                    "postalCode",
                    "stateProvince",
                    "postalAddress",
                    "address2",
                    "country",
                    "city"
                ]
            }
        },
        {
            "name" : "role",
            "postCreate" : {
                "type" : "text/javascript",
                "file" : "roles/update-users-of-role.js"
            },
            "postUpdate" : {
                "type" : "text/javascript",
                "file" : "roles/update-users-of-role.js"
            },
            "postDelete" : {
                "type" : "text/javascript",
                "file" : "roles/update-users-of-role.js"
            },
            "onDelete" : {
                "type" : "text/javascript",
                "file" : "roles/onDelete-roles.js"
            }
        }
    ]
}
