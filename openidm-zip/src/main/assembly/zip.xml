<?xml version="1.0" encoding="UTF-8"?>
<!--
  The contents of this file are subject to the terms of the Common Development and
  Distribution License (the License). You may not use this file except in compliance with the
  License.

  You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the
  specific language governing permission and limitations under the License.

  When distributing Covered Software, include this CDDL Header Notice in each file and include
  the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL
  Header, with the fields enclosed by brackets [] replaced by your own identifying
  information: "Portions Copyrighted [year] [name of copyright owner]".

  Copyright (c) 2011-2015 ForgeRock AS. All rights reserved.
-->
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>bin</id>
    <baseDirectory>/</baseDirectory>
    <formats>
        <format>zip</format>
    </formats>
    <fileSets>
        <fileSet>
            <directory>${basedir}/src/main/resources/security</directory>
            <outputDirectory>/openidm/security</outputDirectory>
            <fileMode>0600</fileMode>
            <directoryMode>0700</directoryMode>
        </fileSet>

        <fileSet>
            <directory>${project.build.directory}/bar-files</directory>
            <outputDirectory>/openidm</outputDirectory>
        </fileSet>

        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <outputDirectory>/openidm</outputDirectory>
            <excludes>
                <exclude>**/*.sh</exclude>
                <exclude>**/*.command</exclude>
                <exclude>**/*.bat</exclude>
                <exclude>**/internal-common/**</exclude>
                <exclude>${exclude.google.samples}</exclude>
                <exclude>${exclude.salesforce.samples}</exclude>
                <exclude>${exclude.google.provisioner}</exclude>
                <exclude>${exclude.salesforce.provisioner}</exclude>

                <!--
                    These particular workflow files are instead bundled as .bar files;
                    as raw files they are excluded. See zip-workflow-files in openidm-zip/pom.xml
                 -->
                <exclude>**/usecase/workflow/certificationRoles*</exclude>
                <exclude>**/usecase/workflow/certificationEntitlements*</exclude>
                <exclude>**/usecase/workflow/manualMatch*</exclude>
                <exclude>**/usecase/workflow/newUserCreate.bpmn20.xml</exclude>
                <exclude>**/usecase/workflow/nUC*.xhtml</exclude>
                <exclude>**/workflow/workflow/*</exclude>

                <!--
                    Remove Sample7 and scriptedazure from the resulting zip until they are redesigned.
                -->
                <exclude>**/sample7/**</exclude>
                <exclude>**/scriptedazure/**</exclude>
                <exclude>**/provisioners/provisioner.openicf-scriptedazure.json</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <outputDirectory>/openidm</outputDirectory>
            <fileMode>754</fileMode>
            <includes>
                <include>**/*.sh</include>
                <include>**/*.command</include>
            </includes>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <outputDirectory>/openidm</outputDirectory>
            <fileMode>754</fileMode>
            <includes>
                <include>**/*.bat</include>
            </includes>
            <lineEnding>windows</lineEnding>
            <filtered>true</filtered>
        </fileSet>
        <!-- Include the Forgerock binary license file if exists -->
        <fileSet>
            <directory>${project.build.directory}</directory>
            <outputDirectory>/openidm/legal-notices</outputDirectory>
            <includes>
                <include>Forgerock_License.txt</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.build.directory}/orientdb-community-${orientdb.studio.version}/www</directory>
            <outputDirectory>/openidm/db/util/orientdb/studio</outputDirectory>
        </fileSet>
        <!-- Create empty logs directory  -->
        <fileSet>
        <directory>${project.build.directory}</directory>
            <excludes>
             <exclude>**/*</exclude>
            </excludes>
            <outputDirectory>/openidm/logs</outputDirectory>
        </fileSet>
        <!-- Setup getting-started sample (replaces Sample4) -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>conf/authentication.json</exclude>
                <exclude>data/Example.ldif</exclude>
                <exclude>data/xmlConnectorData.xml</exclude>
                <exclude>data/resource-schema-extension.xsd</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/getting-started</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-csv.json</include>
            </includes>
            <outputDirectory>/openidm/samples/getting-started/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/getting-started</outputDirectory>
        </fileSet>
        <!-- Setup Sample1  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/Example.ldif</exclude>
                <exclude>conf/authentication.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/sample1</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-xml.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample1/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample1</outputDirectory>
        </fileSet>
        <!-- Setup Sample2  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/*.xsd</exclude>
                <exclude>data/*.xml</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/sample2</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-ldap.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample2/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample2</outputDirectory>
        </fileSet>
        <!-- Setup Sample2b  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/*.xsd</exclude>
                <exclude>data/*.xml</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/sample2b</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-ldap.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample2b/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample2b</outputDirectory>
        </fileSet>
        <!-- Setup Sample2c  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/*.xsd</exclude>
                <exclude>data/*.xml</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/sample2c</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-ldap.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample2c/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample2c</outputDirectory>
        </fileSet>
        <!-- Setup Sample2d  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/*.xsd</exclude>
                <exclude>data/*.xml</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/sample2d</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-ldap.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample2d/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample2d</outputDirectory>
        </fileSet>
        <!-- Setup Sample3  -->
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample3</outputDirectory>
        </fileSet>
        <!-- Setup scriptedrest2dj  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-scriptedrest.json</include>
            </includes>
            <outputDirectory>/openidm/samples/scriptedrest2dj/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/scriptedrest2dj</outputDirectory>
        </fileSet>
        <!-- Setup scriptedcrest2dj  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-scriptedcrest.json</include>
            </includes>
            <outputDirectory>/openidm/samples/scriptedcrest2dj/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/scriptedcrest2dj</outputDirectory>
        </fileSet>
        <!-- Setup scriptedazure  -->
        <!-- fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-scriptedazure.json</include>
            </includes>
            <outputDirectory>/openidm/samples/scriptedazure/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/scriptedazure</outputDirectory>
        </fileSet-->
        <!-- Setup Sample5  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>conf/authentication.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample5</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample5</outputDirectory>
        </fileSet>
        <!-- Setup Sample5b  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>conf/authentication.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample5b</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample5b</outputDirectory>
        </fileSet>
        <fileSet>
          <directory>${basedir}/src/main/resources/samples/sample5</directory>
            <includes>
                <include>conf/**</include>
                <include>data/**</include>
                <include>script/**</include>
            </includes>
            <excludes>
                <exclude>README</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/sample5b</outputDirectory>
        </fileSet>
        <!-- Setup Sample6 (also see below 'files' entry) -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>data/Example.ldif</include>
            </includes>
            <outputDirectory>/openidm/samples/sample6</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-ldap.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample6/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample6</outputDirectory>
        </fileSet>
        <!-- Setup Sample7
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample7</outputDirectory>
        </fileSet-->
        <!-- Setup Sample8  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/Example.ldif</exclude>
                <exclude>conf/authentication.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/sample8</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-xml.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample8/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample8</outputDirectory>
        </fileSet>
        <!-- Setup Sample9  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/Example.ldif</exclude>
                <exclude>conf/authentication.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/sample9</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-xml.json</include>
            </includes>
            <outputDirectory>/openidm/samples/sample9/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/sample9</outputDirectory>
        </fileSet>
        <!-- Setup workflow sample -->
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <excludes>
                <exclude>process-access.json</exclude>
                <exclude>ui-configuration.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/workflow</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/misc</directory>
            <includes>
                <include>external.email.json</include>
            </includes>
            <outputDirectory>/openidm/samples/workflow/conf</outputDirectory>
        </fileSet>
        <!-- Setup audit sample  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/Example.ldif</exclude>
                <exclude>conf/authentication.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/audit-sample</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/sample1/conf</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>conf/sync.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/audit-sample/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-xml.json</include>
            </includes>
            <outputDirectory>/openidm/samples/audit-sample/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/audit-sample</outputDirectory>
        </fileSet>
        <!-- setup jms audit sample -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/Example.ldif</exclude>
                <exclude>conf/authentication.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/audit-jms-sample</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/sample1/conf</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>conf/sync.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/audit-jms-sample/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-xml.json</include>
            </includes>
            <outputDirectory>/openidm/samples/audit-jms-sample/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/audit-jms-sample</outputDirectory>
        </fileSet>
        <!-- setup powershell Azure AD sample -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-azureadpowershell.json</include>
            </includes>
            <outputDirectory>/openidm/samples/powershell2AzureAD/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/powershell2AzureAD</outputDirectory>
        </fileSet>
        <!-- Setup fullStack  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/*.xsd</exclude>
                <exclude>data/*.xml</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/fullStack</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-ldap.json</include>
            </includes>
            <outputDirectory>/openidm/samples/fullStack/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/fullStack</outputDirectory>
        </fileSet>
        <!-- Setup Trusted ServletFilter Sample  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/**</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/trustedservletfilter</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/trustedservletfilter</outputDirectory>
        </fileSet>
        <!-- Setup use case samples-->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/usecase</directory>
            <includes>
                <include>README</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/</outputDirectory>
        </fileSet>
        <!--Use case 1 Reconciliation-->
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <excludes>
                <exclude>conf/managed.json</exclude>
                <exclude>conf/repo.orientdb.json</exclude>
                <exclude>conf/system.properties</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/usecase/usecase1</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/usecase</directory>
            <includes>
                <include>conf/managed.json</include>
                <include>conf/repo.orientdb.json</include>
                <include>conf/sync.json</include>
                <include>conf/system.properties</include>
                <include>conf/provisioner.openicf-HRldap.json</include>
                <include>script/on*.js</include>
                <include>script/transform*.js</include>
                <include>script/defineRoles.js</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase1</outputDirectory>
        </fileSet>
        <!--Use case 2 User onboarding-->
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <excludes>
                <exclude>conf/managed.json</exclude>
                <exclude>conf/process-access.json</exclude>
                <exclude>conf/repo.orientdb.json</exclude>
                <exclude>conf/system.properties</exclude>
                <exclude>conf/workflow.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/usecase/usecase2</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/usecase</directory>
            <includes>
                <include>conf/endpoint-getusermanager.json</include>
                <include>conf/managed.json</include>
                <include>conf/process-access.json</include>
                <include>conf/repo.orientdb.json</include>
                <include>conf/schedule-taskscan_sun*.json</include>
                <include>conf/system.properties</include>
                <include>conf/workflow.json</include>
                <include>conf/external.email.json</include>
                <include>script/getUserManager.js</include>
                <include>script/on*.js</include>
                <include>script/sun*.js</include>
                <include>workflow/sunrise.bpmn20.xml</include>
                <include>workflow/sunset.bpmn20.xml</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase2</outputDirectory>
        </fileSet>

        <fileSet>
            <directory>${project.build.directory}/bar-files/samples/usecase</directory>
            <includes>
                <include>workflow/newUserCreate.bar</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase2</outputDirectory>
        </fileSet>

        <!--Use case 3 User access request-->
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <excludes>
                <exclude>conf/managed.json</exclude>
                <exclude>conf/process-access.json</exclude>
                <exclude>conf/repo.orientdb.json</exclude>
                <exclude>conf/system.properties</exclude>
                <exclude>conf/workflow.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/usecase/usecase3</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/usecase</directory>
            <includes>
                <include>conf/endpoint-getusermanager.json</include>
                <include>conf/external.email.json</include>
                <include>conf/managed.json</include>
                <include>conf/process-access.json</include>
                <include>conf/repo.orientdb.json</include>
                <include>conf/system.properties</include>
                <include>conf/workflow.json</include>
                <include>script/getUserManager.js</include>
                <include>script/on*.js</include>
                <include>workflow/accessRequest.bpmn20.xml</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase3</outputDirectory>
        </fileSet>
        <!--Use case 4 Orphan account detection and manual linking-->
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <excludes>
                <exclude>conf/managed.json</exclude>
                <exclude>conf/process-access.json</exclude>
                <exclude>conf/repo.orientdb.json</exclude>
                <exclude>conf/system.properties</exclude>
                <exclude>conf/workflow.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/usecase/usecase4</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/usecase</directory>
            <includes>
                <include>conf/endpoint-getusermanager.json</include>
                <include>conf/managed.json</include>
                <include>conf/process-access.json</include>
                <include>conf/provisioner.openicf-BusinessCSV.json</include>
                <include>conf/repo.orientdb.json</include>
                <include>conf/syncManagedBusiness.json</include>
                <include>conf/system.properties</include>
                <include>conf/workflow.json</include>
                <include>data/business.csv</include>
                <include>script/getUserManager.js</include>
                <include>script/isSourceValidBusiness.js</include>
                <include>script/on*.js</include>
                <include>script/correlationQuery.js</include>
                <include>workflow/orphanAccountReport.bpmn20.xml</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase4</outputDirectory>
        </fileSet>

        <fileSet>
            <directory>${project.build.directory}/bar-files/samples/usecase</directory>
            <includes>
                <include>workflow/manualMatch.bar</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase4</outputDirectory>
        </fileSet>

        <!--Use case 5 Certification workflow
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <excludes>
                <exclude>conf/managed.json</exclude>
                <exclude>conf/process-access.json</exclude>
                <exclude>conf/repo.orientdb.json</exclude>
                <exclude>conf/system.properties</exclude>
                <exclude>conf/workflow.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/usecase/usecase5</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/usecase</directory>
            <includes>
                <include>conf/endpoint-getusermanager.json</include>
                <include>conf/managed.json</include>
                <include>conf/process-access.json</include>
                <include>conf/repo.orientdb.json</include>
                <include>conf/schedule-certification.json</include>
                <include>conf/schedule-certificationEntitlements.json</include>
                <include>conf/system.properties</include>
                <include>conf/workflow.json</include>
                <include>script/certification.js</include>
                <include>script/certificationEntitlements.js</include>
                <include>script/getUserManager.js</include>
                <include>script/on*.js</include>
                <include>script/roles/effectiveRoles.js</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase5</outputDirectory>
        </fileSet>

        <fileSet>
            <directory>${project.build.directory}/bar-files/samples/usecase</directory>
            <includes>
                <include>workflow/certification*bar</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase5</outputDirectory>
        </fileSet>
        -->
        <!--Use case 6 Password change workflow-->
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <excludes>
                <exclude>conf/managed.json</exclude>
                <exclude>conf/process-access.json</exclude>
                <exclude>conf/repo.orientdb.json</exclude>
                <exclude>conf/system.properties</exclude>
                <exclude>conf/workflow.json</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/usecase/usecase6</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/usecase</directory>
            <includes>
                <include>conf/endpoint-getusermanager.json</include>
                <include>conf/external.email.json</include>
                <include>conf/managed.json</include>
                <include>conf/process-access.json</include>
                <include>conf/repo.orientdb.json</include>
                <include>conf/schedule-taskscan_passwordchange.json</include>
                <include>conf/system.properties</include>
                <include>conf/workflow.json</include>
                <include>script/getUserManager.js</include>
                <include>script/on*.js</include>
                <include>script/passwordchange.js</include>
                <include>workflow/passwordChangeReminder.bpmn20.xml</include>
            </includes>
            <outputDirectory>/openidm/samples/usecase/usecase6</outputDirectory>
        </fileSet>
        <!-- google connector-->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>${google.provisioner}</include>
            </includes>
            <outputDirectory>/openidm/samples/google-connector/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>${saas.connectors.conf}</include>
                <include>${saas.connectors.script}</include>
            </includes>
            <outputDirectory>/openidm/samples/google-connector</outputDirectory>
        </fileSet>
        <!-- salesforce connector-->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>${salesforce.provisioner}</include>
            </includes>
            <outputDirectory>/openidm/samples/salesforce-connector/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>${saas.connectors.conf}</include>
                <include>${saas.connectors.script}</include>
            </includes>
            <outputDirectory>/openidm/samples/salesforce-connector</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf*ldap.json</include>
            </includes>
            <outputDirectory>/openidm/ui/admin/default/templates/admin/connector/configs/ldap</outputDirectory>
        </fileSet>
        <!-- Setup roles samples  -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/roles</directory>
            <includes>
                <include>README.md</include>
            </includes>
            <outputDirectory>/openidm/samples/roles/</outputDirectory>
        </fileSet>
        <!-- Roles CRUD operations -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/roles/crudops</directory>
            <includes>
                <include>README.md</include>
            </includes>
            <outputDirectory>/openidm/samples/roles/crudops/</outputDirectory>
        </fileSet>
        <!-- Provisioning with Roles -->
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/internal-common</directory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>data/*.xsd</exclude>
                <exclude>data/*.xml</exclude>
            </excludes>
            <outputDirectory>/openidm/samples/roles/provrole/</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources/samples/provisioners</directory>
            <includes>
                <include>provisioner.openicf-ldap.json</include>
            </includes>
            <outputDirectory>/openidm/samples/roles/provrole/conf</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>conf/**</include>
                <include>script/**</include>
            </includes>
            <outputDirectory>/openidm/samples/roles/provrole/</outputDirectory>
        </fileSet>
    <!-- Setup link qualifier samples  -->
    <fileSet>
        <directory>${basedir}/src/main/resources/samples/multiaccountlinking</directory>
        <includes>
            <include>README.md</include>
            <include>conf/sync.json</include>
        </includes>
        <outputDirectory>/openidm/samples/multiaccountlinking/</outputDirectory>
    </fileSet>
    <fileSet>
        <directory>${basedir}/src/main/resources/samples/internal-common</directory>
        <includes>
            <include>**</include>
        </includes>
        <excludes>
            <exclude>data/*.xsd</exclude>
            <exclude>data/*.xml</exclude>
        </excludes>
        <outputDirectory>/openidm/samples/multiaccountlinking/</outputDirectory>
    </fileSet>
    <fileSet>
        <directory>${basedir}/src/main/resources/samples/provisioners</directory>
        <includes>
            <include>provisioner.openicf-ldap.json</include>
        </includes>
        <outputDirectory>/openidm/samples/multiaccountlinking/conf</outputDirectory>
    </fileSet>
    <fileSet>
        <directory>${basedir}/src/main/resources</directory>
        <includes>
            <include>conf/**</include>
            <include>script/**</include>
        </includes>
        <outputDirectory>/openidm/samples/multiaccountlinking/</outputDirectory>
    </fileSet>
	<!-- Setup Historical Account Linking Sample -->
	<fileSet>
		<directory>${basedir}/src/main/resources/samples/internal-common</directory>
		<includes>
			<include>**</include>
		</includes>
		<excludes>
			<exclude>data/*.xsd</exclude>
			<exclude>data/*.xml</exclude>
		</excludes>
		<outputDirectory>/openidm/samples/historicalaccountlinking</outputDirectory>
	</fileSet>
	<fileSet>
		<directory>${basedir}/src/main/resources/samples/provisioners</directory>
		<includes>
			<include>provisioner.openicf-ldap.json</include>
		</includes>
		<outputDirectory>/openidm/samples/historicalaccountlinking/conf</outputDirectory>
	</fileSet>
	<fileSet>
		<directory>${basedir}/src/main/resources</directory>
		<includes>
			<include>conf/**</include>
			<include>script/**</include>
		</includes>
		<outputDirectory>/openidm/samples/historicalaccountlinking</outputDirectory>
	</fileSet>
    <!-- Setup Multiple Passwords Sample  -->
    <fileSet>
        <directory>${basedir}/src/main/resources/samples/internal-common</directory>
        <includes>
            <include>**</include>
        </includes>
        <excludes>
            <exclude>data/*.xsd</exclude>
            <exclude>data/*.xml</exclude>
        </excludes>
        <outputDirectory>/openidm/samples/multiplepasswords</outputDirectory>
    </fileSet>
	<fileSet>
		<directory>${basedir}/src/main/resources/samples/multiplepasswords</directory>
		<includes>
			<include>README.md</include>
            <include>conf/**</include>
            <include>script/**</include>
            <include>data/**</include>
		</includes>
		<outputDirectory>/openidm/samples/multiplepasswords/</outputDirectory>
	</fileSet>
	<fileSet>
		<directory>${basedir}/src/main/resources/samples/provisioners</directory>
		<includes>
            <include>provisioner.openicf-ldap.json</include>
            <include>provisioner.openicf-ldap2.json</include>
		</includes>
		<outputDirectory>/openidm/samples/multiplepasswords/conf</outputDirectory>
	</fileSet>
	<fileSet>
		<directory>${basedir}/src/main/resources</directory>
		<includes>
			<include>conf/**</include>
			<include>script/**</include>
		</includes>
		<outputDirectory>/openidm/samples/multiplepasswords/</outputDirectory>
	</fileSet>
  </fileSets>
    <!-- sample6 -->
    <files>
        <file>
            <source>${basedir}/src/main/resources/samples/provisioners/provisioner.openicf-adldap.json</source>
            <destName>provisioner.openicf-realad.json</destName>
            <outputDirectory>/openidm/samples/sample6/alternatives</outputDirectory>
        </file>
    </files>
    <dependencySets>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>/openidm/bundle</outputDirectory>
            <scope>runtime</scope>
            <excludes>
                <exclude>org.apache.felix:org.apache.felix.framework</exclude>
                <exclude>org.osgi:org.osgi.core</exclude>
                <exclude>org.osgi:org.osgi.compendium</exclude>
                <exclude>org.apache.felix:org.osgi.core</exclude>
                <exclude>org.apache.felix:org.osgi.compendium</exclude>
                <exclude>org.apache.felix:org.osgi.foundation</exclude>
                <exclude>org.apache.felix:javax.servlet</exclude>
                <exclude>org.forgerock.openicf.connectors:*</exclude>
                <exclude>org.forgerock.openidm:openidm-shell</exclude>
                <exclude>org.forgerock.openidm:openidm-ui-ria*</exclude>
                <exclude>org.forgerock.openidm:openidm-ui</exclude>
                <exclude>org.forgerock.openidm:openidm-workflow-activiti:**:jar-with-dependencies</exclude>
                <exclude>org.forgerock.openidm:openidm-workflow-remote</exclude>
                <exclude>org.apache.felix:*gogo*</exclude>
                <exclude>org.springframework*:*</exclude> <!--exclude optional Activiti dependency-->
                <exclude>stax:*</exclude>
                <exclude>snappy:*</exclude>
                <exclude>colt:*</exclude>
                <exclude>concurrent:concurrent</exclude>
                <exclude>org.json:*</exclude>
                <exclude>org.hibernate.javax.persistence:*</exclude>
                <exclude>org.javassist:*</exclude>
                <exclude>*:*:js</exclude>
                <exclude>*:*:css</exclude>
                <exclude>*:*:less</exclude>
                <exclude>*:*:zip</exclude>
                <exclude>*:*:pom</exclude>
                <exclude>com.google.oauth-client:google-oauth-client</exclude>
                <exclude>com.google.oauth-client:google-oauth-java6</exclude>
                <exclude>com.google.api-client:google-api-client</exclude>
                <exclude>com.google.http-client:google-http-client</exclude>
                <exclude>com.google.http-client:google-http-client-jackson2</exclude>
                <exclude>com.google.apis:google-api-services-admin-directory</exclude>
                <exclude>com.google.apis:google-api-services-licensing</exclude>
                <exclude>org.apache.olingo:*</exclude>
                <exclude>com.fasterxml:aalto-xml</exclude>
                <exclude>org.forgerock.openidm.tools:custom-scripted-connector-bundler:*</exclude>
                <!--exclude>org.apache.felix:org.apache.felix.scr.annotations</exclude>
                <exclude>javax.persistence:persistence-api</exclude>
                <exclude>javax.transaction:jta</exclude>
                <exclude>org.apache.felix:org.apache.felix.main</exclude>
                <exclude>org.apache.felix:org.osgi.foundation</exclude>
                <exclude>net.sf.kxml:kxml2</exclude>
                <exclude>xmlpull:xmlpull</exclude-->
                <!-- Exclude sample scriptedrest2dj dependencies -->
                <exclude>commons-beanutils:commons-beanutils</exclude>
                <exclude>commons-collections:commons-collections</exclude>
                <exclude>commons-lang:commons-lang</exclude>
                <exclude>commons-logging:commons-logging</exclude>
                <exclude>net.sf.ezmorph:ezmorph</exclude>
                <exclude>org.codehaus.groovy.modules.http-builder:http-builder</exclude>
                <exclude>net.sf.json-lib:json-lib</exclude>
                <exclude>net.sourceforge.nekohtml:nekohtml</exclude>
                <exclude>xerces:xercesImpl</exclude>
                <exclude>xml-apis:xml-apis</exclude>
                <exclude>xml-resolver:xml-resolver</exclude>
                <exclude>org.apache.httpcomponents:httpcore-nio</exclude>
                <exclude>org.apache.tomcat:tomcat-jdbc</exclude>
            </excludes>
        </dependencySet>
        <dependencySet>
            <fileMode>644</fileMode>
            <outputFileNameMapping>lodash.js</outputFileNameMapping>
            <outputDirectory>/openidm/bin/defaults/script/lib</outputDirectory>
            <includes>
                <include>org.forgerock.commons.ui.libs:lodash</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <fileMode>644</fileMode>
            <outputFileNameMapping>handlebars.js</outputFileNameMapping>
            <outputDirectory>/openidm/bin/defaults/script/lib</outputDirectory>
            <includes>
                <include>org.forgerock.commons.ui.libs:handlebars:js:4.0.5</include>
            </includes>
        </dependencySet>
        <!-- Explode UI for easy modification -->
        <dependencySet>
            <unpack>true</unpack>
            <fileMode>644</fileMode>
            <directoryMode>755</directoryMode>
            <outputDirectory>/openidm/ui/selfservice</outputDirectory>
            <includes>
                <include>org.forgerock.openidm:openidm-ui-enduser</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <unpack>true</unpack>
            <fileMode>644</fileMode>
            <directoryMode>755</directoryMode>
            <outputDirectory>/openidm/ui/admin</outputDirectory>
            <includes>
                <include>org.forgerock.openidm:openidm-ui-admin</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>/openidm/connectors</outputDirectory>
            <includes>
                <include>org.forgerock.openicf.connectors:*-connector</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>/openidm/lib</outputDirectory>
            <includes>
                <include>com.google.oauth-client:google-oauth-client</include>
                <include>com.google.oauth-client:google-oauth-java6</include>
                <include>com.google.api-client:google-api-client</include>
                <include>com.google.http-client:google-http-client</include>
                <include>com.google.http-client:google-http-client-jackson2</include>
                <include>com.google.apis:google-api-services-admin-directory</include>
                <include>com.google.apis:google-api-services-licensing</include>
                <include>org.apache.olingo:*</include>
                <include>com.fasterxml:aalto-xml</include>
                <include>org.apache.tomcat:tomcat-jdbc</include>
                <include>org.forgerock.openicf.connectors:groovy-connector</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <unpack>false</unpack>
            <outputFileNameMapping>felix.jar</outputFileNameMapping>
            <includes>
                <include>org.apache.felix:org.apache.felix.framework</include>
            </includes>
            <outputDirectory>/openidm/bin</outputDirectory>
        </dependencySet>
        <dependencySet>
            <unpack>false</unpack>
            <outputFileNameMapping>openidm.jar</outputFileNameMapping>
            <includes>
                <include>org.forgerock.openidm:openidm-shell</include>
            </includes>
            <outputDirectory>/openidm/bin</outputDirectory>
        </dependencySet>
        <dependencySet>
            <unpack>false</unpack>
            <includes>
                <include>org.apache.felix:org.apache.felix.gogo.runtime</include>
                <include>org.apache.felix:org.apache.felix.gogo.shell</include>
            </includes>
            <outputDirectory>/openidm/bin</outputDirectory>
        </dependencySet>
        <dependencySet>
            <outputDirectory>/openidm/bin/workflow</outputDirectory>
            <includes>
                <include>org.forgerock.openidm:openidm-workflow-activiti:**:jar-with-dependencies</include>
                <include>org.forgerock.openidm:openidm-workflow-remote</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <unpack>true</unpack>
            <outputDirectory>/openidm/</outputDirectory>
            <includes>
                <include>org.forgerock.commons:launcher-zip:zip:*</include>
            </includes>
            <unpackOptions>
                <includes>
                    <include>bin/**</include>
                </includes>
            </unpackOptions>
        </dependencySet>
        <dependencySet>
            <unpack>false</unpack>
            <includes>
                <include>org.forgerock.openidm.tools:custom-scripted-connector-bundler:*</include>
            </includes>
            <outputDirectory>/openidm/tools</outputDirectory>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>/openidm/lib</outputDirectory>
            <includes>
                <include>commons-beanutils:commons-beanutils</include>
                <include>commons-collections:commons-collections</include>
                <include>commons-lang:commons-lang</include>
                <include>commons-logging:commons-logging</include>
                <include>net.sf.ezmorph:ezmorph</include>
                <include>org.codehaus.groovy.modules.http-builder:http-builder</include>
                <include>net.sf.json-lib:json-lib</include>
                <include>net.sourceforge.nekohtml:nekohtml</include>
                <include>xerces:xercesImpl</include>
                <include>xml-apis:xml-apis</include>
                <include>xml-resolver:xml-resolver</include>
                <include>org.apache.httpcomponents:httpcore-nio</include>
            </includes>
        </dependencySet>

    </dependencySets>
</assembly>
