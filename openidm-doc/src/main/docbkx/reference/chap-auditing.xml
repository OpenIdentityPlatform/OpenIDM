<?xml version="1.0" encoding="UTF-8"?>
<!--
  ! CCPL HEADER START
  !
  ! This work is licensed under the Creative Commons
  ! Attribution-NonCommercial-NoDerivs 3.0 Unported License.
  ! To view a copy of this license, visit
  ! http://creativecommons.org/licenses/by-nc-nd/3.0/
  ! or send a letter to Creative Commons, 444 Castro Street,
  ! Suite 900, Mountain View, California, 94041, USA.
  !
  ! You can also obtain a copy of the license at
  ! legal/CC-BY-NC-ND.txt.
  ! See the License for the specific language governing permissions
  ! and limitations under the License.
  !
  ! If applicable, add the following below this CCPL HEADER, with the fields
  ! enclosed by brackets "[]" replaced with your own identifying information:
  !      Portions Copyright [yyyy] [name of copyright owner]
  !
  ! CCPL HEADER END
  !
  !      Copyright 2011 ForgeRock AS
  !    
-->
<chapter xml:id='chap-auditing'
 xmlns='http://docbook.org/ns/docbook'
 version='5.0' xml:lang='en'
 xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
 xsi:schemaLocation='http://docbook.org/ns/docbook http://docbook.org/xml/5.0/xsd/docbook.xsd'
 xmlns:xlink='http://www.w3.org/1999/xlink'
 xmlns:xinclude='http://www.w3.org/2001/XInclude'>
 <title>Auditing</title>

  <para>OpenIDM auditing facility can publish and log all relevant system
  activity to the desired targets. This includes the data from reconciliation
  as a basis for reporting, as well as detailed activity logs to capture
  operations on the internal (managed) and external (system) objects.</para>

 <section xml:id="log-types">
  <title>Log Types</title>
  <variablelist>
   <varlistentry>
    <term>Activity log</term>
    <listitem>
     <para>Logs operations on the internal (managed) and external (system)
     objects.</para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Reconciliation log</term>
    <listitem>
     <para>Logs the results of a reconciliation run, including the
     assessed situation, and the action taken as a result. Details of
     the action can be queried from the activity log, where the log
     entry displays a parent activity identifier of
     <literal>recon/<replaceable>reconid</replaceable></literal>.</para>
    </listitem>
   </varlistentry>
  </variablelist>
 </section>

 <section xml:id="log-related-activities-transactions">
  <title>Related Activities &amp; Transactions</title>
  <para>Where an action is done in the context of a higher level
  business function, such as an object update as a result of
  synchronization for a given object mapping, the log entry points
  to a parent activity to give that context. These relationships are
  hierarchical. For example, this synchronization could have been a
  result of a scheduled reconciliation for an object type. As a
  convenience aside from the parent activity, the top level root
  activity is logged with each entry to quickly query all related
  activities.</para>
  <!-- TODO: An example could help. -->
 </section>
</chapter>
